◆概要
モデルのオブジェクト数が多い！
モディファイアを適用してから結合（マージ）するのめんどくさい！
というときに便利なアドオンです。

――――――
◆はじめに
このデータは、3Dモデリングソフト Blender 用のアドオンです。

↓以下のBlenderバージョンで動作確認済みです。
2.93
3.00

※ Blender 2.8系にも導入可能ですが、動作しない機能があるなどの不具合が生じる可能性があります。
――――――
https://sleetcatshop.booth.pm/items/1224307
同作者の別アドオン↑“ShapeKeys Util”との連携機能を有効にすることにより、
シェイプキーをもつオブジェクトのモディファイアを適用してマージできます。

――――――
◆エクスポート機能について
バージョンVer_2.2.0以降、本アドオンに搭載されていたfbxエクスポート機能は別アドオン『MizoresCustomExporter』として分離しました。

――――――
◇ソースコードのライセンス：
GNU General Public License, version 2

◇Sample.blend のライセンス：
このアドオンの動作テスト以外の用途（アバターなど）に使用したい場合、
Read-me最下部の連絡先から連絡してください。
（何に使うか知りたいので）

――――――
◆機能説明
――――――
◇オブジェクト選択中に右クリック → Auto Merge
エクスポート時だけでなく、オブジェクトモードでの編集中にも
モディファイア自動適用＆結合の操作を行うことができます。

――――――
→ Merge Children
選択中オブジェクトの子階層以下にあるオブジェクトをマージします。

・ツールシェルフ
　・Duplicate
　　チェックを入れると、
　　対象となるオブジェクトを複製した上でマージ処理を行います。
　　
　・Apply Parent Object Modifiers
　　チェックを入れると、
　　結合先オブジェクトのモディファイアを適用します。
――――――
→ Merge Grouped Children
選択中のオブジェクトのうち、
オブジェクトグループ“MergeGroup”に属するものに対し、
それぞれ子階層以下にあるオブジェクトをマージします。

（アドオン『MizoresExporter』によるAutoMerge連携機能は
　このコマンドと同じ動作でマージ処理を行います　　）

・ツールシェルフ
　・Duplicate
　　チェックを入れると、
　　対象となるオブジェクトを複製した上でマージ処理を行います。
　　
　・Apply Parent Object Modifiers
　　チェックを入れると、
　　結合先オブジェクトのモディファイアを適用します。
――――――
→ Merge Selection
最後に選択したオブジェクトに対し、
選択中の他オブジェクトをマージします。

・ツールシェルフ
　・Duplicate
　　チェックを入れると、
　　対象となるオブジェクトを複製した上でマージ処理を行います。
　　
　・Apply Parent Object Modifiers
　　チェックを入れると、
　　結合先オブジェクトのモディファイアを適用します。
――――――
→ Assign Merge Group
選択中のオブジェクトを
コレクション“MergeGroup”に入れたり外したりします。

Export → Auto Mergeでのエクスポート時、
“MergeGroup”に入っているオブジェクトは
子オブジェクトを結合した状態でエクスポートされます。

・ツールシェルフ
　・Assign
　　チェックを入れるとグループに追加、
　　外すとグループから除外します。
――――――

！ 注意 ！

※
マージする際、Armatureを除く全てのモディファイアは適用されます。
ただし、レンダリング対象でないモディファイア（モディファイア一覧でカメラアイコンが押されていないもの）は適用せず無視されます。

※
同作者の別アドオン“ShapeKeys Util”との連携機能が無効になっている場合、シェイプキーをもつオブジェクトはモディファイアを無視してマージ処理を行います。
その場合でも、シェイプキーを含まない他のオブジェクトは通常通りにモディファイア適用・マージを行います。

――――――
◆動作例
※
以下の動作は同梱の『Sample.blend』ファイルで実際に確認できます。


例えば、以下のような階層構造・オブジェクトグループ設定のデータがあったとします。
（オブジェクトの順序は前後する場合あり）

・Sample.blend
├Armature　　　　　グループ設定：無
│├Body　　　　　　グループ設定：MergeGroup
││├Clothes　　　 グループ設定：無
│││└Ribbon　　　グループ設定：無
││└Head　　　　　グループ設定：無
│├Hair　　　　　　グループ設定：MergeGroup
││├BackHair　　　グループ設定：無
││└FrontHair　　 グループ設定：無
│├Plane　　　　　 グループ設定：DontExport
│└Skirt　　　　　 グループ設定：無
└Cube　　　　　　　グループ設定：DontExport
└Plane.001　　　 グループ設定：無

この状態で File → Export → Auto Merge(.fbx) を使用し、
出力されたfbxファイルをUnityにインポートすると

以下のような階層構造のデータになっているのが確認できます。
（オブジェクトの順序は前後する場合あり）

・Sample
├Armature
│└（ボーン用オブジェクト）
├Hair
├Body
└Skirt

――――――
◆不具合・エラーが起きた時
このアドオンの機能はBlender標準のAPIを使って作成しているため、
何らかの不具合が発生した場合には
すぐに Undo（Ctrl+Z） すれば機能使用前の状態に復元できます。

また、以下の連絡先に不具合発生時の状況を送っていただけると
修正の手助けになります。

――――――
◆連絡先
不具合報告や要望、感想などありましたらこちらにどうぞ。

修正・実装が可能と思われるものに関しては着手を検討しますが、
リアルの事情や技術的問題などの理由により
対処の先延ばしまたはお断りをする場合があるかもしれません。
予めご了承ください。

Twitter：猫柳みぞれ　https://twitter.com/sleetcat123
